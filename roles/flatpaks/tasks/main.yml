---
- name: Set Default Flatpaks
  ansible.builtin.set_fact:
    flatpaks:
      - com.usebottles.bottles
      - com.github.tchx84.Flatseal
  when: flatpaks is not defined

- name: Ensure Flatpak is Installed
  become: true
  ansible.builtin.apt:
    name:
      - flatpak
      - plasma-discover-backend-flatpak
    state: present

- name: Add Flatpak Remote
  become: true
  community.general.flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: "https://dl.flathub.org/repo/flathub.flatpakrepo"
    method: user

- name: Install Flatpaks
  community.general.flatpak:
    name: "{{ item }}"
    method: user
  with_items: "{{ flatpaks }}"

# vim: ft=yaml.ansible:
